name: dashboard-rs
summary: Rust Home Dashboard Frontend
description:
  The kiosk dashboard frontend for the Home Dashboard
base: core22
confinement: strict
architectures:
  - amd64
parts:
  rust-deps:
    plugin: nil
    build-packages:
      - curl
    override-pull: curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
  dashboard-rs:
    plugin: rust
    source: .
    after:
      - rust-deps
    stage-snaps:
      - ubuntu-frame
    build-packages:
      - build-essential
      - pkg-config
      - libgtk-3-dev
      - libwebkit2gtk-4.1-dev
      - libayatana-appindicator3-dev
      - librsvg2-dev
      - libsoup-3.0-dev
      - libjavascriptcoregtk-4.1-dev
    stage-packages:
      - libgtk-3-0
      - libwebkit2gtk-4.1-0
      - libayatana-appindicator3-1
      - librsvg2-2
      - libsoup-3.0-0
      - libjavascriptcoregtk-4.1-0
    override-build: snapcraftctl build

apps:
  dashboard-rs:
    plugs: [ desktop, gsettings, opengl, wayland, x11, mount-observe, calendar-service ]
    extensions:
      - gnome
    command: 'bin/dashboard_app_rs'

type: app
version: git