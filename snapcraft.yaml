name: dashboard-rs
summary: Rust Home Dashboard Frontend
description:
  The kiosk dashboard frontend for the Home Dashboard
base: core22
confinement: strict
parts:
  rust-deps:
    plugin: nil
    override-pull: curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
  dashboard-rs:
    plugin: rust
    source: .
    after:
      - rust-deps
    stage-snaps:
      - ubuntu-frame
    build-packages:
      - build-essential
      - pkg-config
      - libgtk-3-dev
      - libwebkit2gtk-4.1-dev
      - libayatana-appindicator3-dev
      - librsvg2-dev
      - libsoup-3.0-dev
      - libjavascriptcoregtk-4.1-dev
    stage-packages:
      - libgtk-3
      - libwebkit2gtk-4.1
      - libayatana-appindicator3
      - librsvg2
      - libsoup-3.0
      - libjavascriptcoregtk-4.1
    override-build: snapcraftctl build

apps:
  dashboard-rs:
    plugs: [ desktop, desktop-legacy, gsettings, opengl, wayland, x11, mount-observe, calendar-service]
    extensions:
      - gnome
    command: 'bin/dashboard_app_rs'
type: app
version: git